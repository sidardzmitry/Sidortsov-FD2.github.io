<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Document</title>
  </head>
  <body>
    <h2>AJAX XMLHttpRequest</h2>
    <button>Click</button>
    <div class="container"></div>
    <script>
      let btn = document.querySelector("button");
      let container = document.querySelector(".container");
    
      function getPosts(cb) {
        let xhr = new XMLHttpRequest();
        xhr.open("GET", "https://api.sampleapis.com/beers/ale");
        xhr.addEventListener("load", () => {
          let response = JSON.parse(xhr.responseText);
          cb(response);
        });
        xhr.addEventListener("error", () => {
          console.log("error");
        });
        xhr.send();
      };

      function renderPost(response) {
          let fragment = document.createDocumentFragment();
          response.forEach(post => {
            let card = document.createElement('div');
            card.classList.add('card');

            let img = document.createElement('img');
            img.classList.add('card-img-top');
            img.src = post.image;

            let cardBody = document.createElement('div');
            cardBody.classList.add('card-body');

            const title = document.createElement('h5');
            title.classList.add('card-title');
            title.textContent = post.name;

            const article = document.createElement('p');
            article.classList.add('card-text');
            article.textContent = post.price;

            cardBody.appendChild(img);
            cardBody.appendChild(title);
            cardBody.appendChild(article);
            card.appendChild(cardBody);
            fragment.appendChild(card);
          });
        container.appendChild(fragment);
      };

      btn.addEventListener('click', (e) => {
        getPosts(renderPost());
      });
      


    </script>
  </body>
</html>
